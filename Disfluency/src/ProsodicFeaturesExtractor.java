import java.util.Vector;import java.io.*;// TODO// For now, this class has knowledge of which prosodic features to extract// Caller gives files, and asks to extract prosodic features at certain timespublic class ProsodicFeaturesExtractor {	Vector<String> m_featureNames;		public ProsodicFeaturesExtractor() { 		m_featureNames = new Vector<String>();		m_featureNames.add("intervalSize");		m_featureNames.add("pauseLengthBeforeWord");		m_featureNames.add("wordpitchrange"); 		m_featureNames.add("wordpitchrangenotnormalized"); 		m_featureNames.add("energy"); 		m_featureNames.add("energynotnormalized"); 		m_featureNames.add("f0"); 		m_featureNames.add("f0notnormalized"); 	}	public Vector<String> getFeatureNames() {		return m_featureNames;	}	// since we don't have Pair in java, just use two vectors of start and corresponding	// stop times...	public Vector<Vector<Double>> 	extractFeatures(String wavfile, Vector<Double> startoffsets, Vector<Double> endoffsets) {		Integer numintervals = startoffsets.size();		assert(numintervals==endoffsets.size());		Vector<Vector<Double>> prosodicFeatures = new Vector<Vector<Double>>();		try 		{				String str = "intervals.txt";			File file= new File(str);			BufferedWriter output = new BufferedWriter(new FileWriter(file));					for(int i=0; i<startoffsets.size(); i++)		{			double start = startoffsets.get(i).doubleValue()/1000;			output.write((new Double(start)).toString());			output.newLine();			double end = endoffsets.get(i).doubleValue()/1000;			output.write((new Double(end)).toString());			output.newLine();			prosodicFeatures.add(new Vector<Double>());		   ((Vector<Double>)prosodicFeatures.get(i)).add(new Double(endoffsets.get(i)-startoffsets.get(i)));			if(i>0)				((Vector<Double>)prosodicFeatures.get(i)).add(new Double(startoffsets.get(i)-endoffsets.get(i-1)));			else				((Vector<Double>)prosodicFeatures.get(i)).add(new Double(0));				}		    output.close();	    }		catch (IOException e) {			e.printStackTrace();		}				//String[] cmd = {"/Applications/Praat.app/Contents/MacOS/Praat", " pitchscript.praat", wavfile}; 			    String debugCurrentDir = System.getProperty("user.dir");	    String osname = System.getProperty("os.name");		String praatpath = "/Applications/Praat.app/Contents/MacOS/Praat src/pitchscript.praat ";		if(osname.compareToIgnoreCase("Mac OS X")!=0) {			praatpath = "C:/Users/teja/Documents/Stan/cs224s/praatcon.exe src/pitchscript.praat ";		}				File f = new File("features.txt");		if (f.exists()){			f.delete();		}				String cmd =  praatpath+ wavfile;		try		{			Process p =Runtime.getRuntime().exec(cmd);			try			{				int exitCode = p.waitFor();				}			catch(Exception e){e.printStackTrace();}		}				catch(IOException e)		{			e.printStackTrace();		}		// interact with Praat script and fill in prosodic features. Write and delete intermediate		// files if needed..		// TODO		//		//for(int i=0; i<startoffsets.size(); i++)		{						try{				// Open the file that is the first 				// command line parameter				FileInputStream fstream = new FileInputStream("features.txt");				// Get the object of DataInputStream				DataInputStream in = new DataInputStream(fstream);				BufferedReader br = new BufferedReader(new InputStreamReader(in));				String strLine;				int lineno=0;				int iterator=0;				//Read File Line By Line				while ((strLine = br.readLine()) != null)   {					if(strLine.equals("--undefined--"))					{					      strLine="0";					}					((Vector<Double>)prosodicFeatures.get(lineno)).add(new Double(strLine));						// Print the content on the console					//System.out.println (strLine);					if(iterator==5)					{						lineno++;						iterator=0;					}					else						iterator++;				}				//Close the input stream				in.close();			}catch (Exception e){//Catch exception if any				System.err.println("Error: " + e.getMessage());			}				}		// sanity checks...		assert(prosodicFeatures.size()==numintervals); // as many prosodic features as intervals.		for(int interval=0; interval<numintervals; interval++) {			assert(prosodicFeatures.get(interval).size()==m_featureNames.size());		}		return prosodicFeatures;	}}